<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="../../Assets/CSS/main.css">
    <link rel="stylesheet" href="../../Assets/CSS/policyHolder.css">
    <link rel="stylesheet" href="../../Assets/CSS/dashboardNavBar.css">
    <link rel="stylesheet" href="../../Assets/CSS/dashboardStructure.css">
</head>
<body>

    <nav>
        <div class="sidenav">
            <div style="text-align: center;">
                <img src="../../Assets/Images/logo_bird.jpg"  alt="" id="logo" >
            </div>
            <a href="http://localhost/IWTProject/IWT_LifeInsurance_SLIITY1S2/Frontend/Pages/Dashboard/policyHolderDashboard.html">Dashboard</a>
            <a href="http://localhost/IWTProject/IWT_LifeInsurance_SLIITY1S2/Frontend/Pages/Dashboard/policyHolderProfile.html">Profile</a>
            <a href="http://localhost/IWTProject/IWT_LifeInsurance_SLIITY1S2/Frontend/Pages/Dashboard/policyHolderBeneficary.html">Beneficiary</a>
            <a href="http://localhost/IWTProject/IWT_LifeInsurance_SLIITY1S2/Frontend/Pages/Dashboard/policyHolderPaymentHistory.html">Payments</a>
            <!-- <a href="#">Support</a> -->
            <a href="http://localhost/IWTProject/IWT_LifeInsurance_SLIITY1S2/Frontend/Pages/Dashboard/changePassword.html">Settings</a>
            <a id="logOut" href="#">Log Out</a>
        </div>
    </nav>
   
    
    <div class="header">
        <h1 class="heading">One Life Insurance</h1>
        <div class="padding">
            <button class="navButton">Claim</button>
            <span class="username">Username</span>
        </div>

    </div>

    <div class="main">

        <div> <!--Profile Picture-->
            <label id="pageName">Profile</label>
            <div>
                <img src="http://localhost/IWTProject/IWT_LifeInsurance_SLIITY1S2/Frontend/Assets/Images/profilePicture.png" alt="" style="border: 1px; width: 175px; height: 175px; border-radius: 50%;">
            </div>
        </div>
    

        <form id="editForm" action="updateProfile.php" method="post">
    
    
            <div> 
                <div ><!--First Name-->
                    <label >Name</label><br>
                    <input id="name" type="text" name="name" readonly>
                </div>

                <div ><!-- User Name-->
                    <label >Username</label><br>
                    <input id="username" type="text" name="username" readonly>
                </div>

                <div ><!-- User Name-->
                    <label >Password</label><br>
                    <input id="password" type="text" name="password" readonly>
                </div>
    
            
                <div> <!--Date of Birth-->
                    <label >Date Of Birth</label><br>
                    <input id="dob" type="date" name="dob" readonly>
                </div>
    
    
                <div> <!--NIC-->
                    <label >NIC</label><br>
                    <input id="nic" type="text" name="nic" readonly>
                </div>
            </div>
        
            <div> <!--Permanent address-->
                <div>
                    <label >Permanent Address</label><br>
                    <input id="street" placeholder="Street" name="street" readonly>
                    <input id="city" type="text" placeholder="City" name="city" readonly>
                    <input id="province" type="text" placeholder="Provice" name="province" readonly>
                    <input id="country" type="text" placeholder="Country" name="country" readonly>
                    <input id="postalCode" type="number" placeholder="Postal Code(number)" name="postalCode" readonly>                    
                </div>
            </div>
    
            <br>
        
            <div> <!--Phone number-->
                <div>
                    <label >Phone</label><br>
                    <input id="phone" type="tel" placeholder="(076) 757-1212" name="phone" readonly>
                </div>
            
                <!-- <div> 
                    <label >Email</label><br>
                    <input type="email" placeholder="oneLife@gmail.com" id="email" name="email" readonly>
                    <span id="emailError" class="error-message"></span>
                    
                </div> -->

            </div>
            <!-- <input id="savebtn" type="submit" Value="Save Changes" class="button" onclick="submitForm()"> -->
        </form>
    
            <button id="editbtn" class="button">Edit Profile</button>
            <button id="cancelbtn" class="hidden" class="button" >Cancel</button>
            <button  id="savebtn" class="hidden" class="button">Save Changes</button>


    
        <script>
            fetch('profile.php')
                .then(response => response.json())
                .then(data => {
                    //this get the reference input fields given abouve using id's
                    const name = document.getElementById('name');
                    const username = document.getElementById('username');
                    const dob = document.getElementById('dob');
                    const nic = document.getElementById('nic');
                    const street = document.getElementById('street');
                    const city = document.getElementById('city');
                    const province = document.getElementById('province');
                    const country = document.getElementById('country');
                    const postalCode = document.getElementById('postalCode');
                    const password = document.getElementById('password');
                    
    
                    //this is use to access the first element of the data array
                    const item = data[0];
    
                    //if the item has the data, then it will go inside the loop
                    if(item) {
                        name.value = item.Name;
                        username.value = item.Username;
                        dob.value = item.DOB;
                        nic.value = item.NIC;
                        street.value = item.Street;
                        city.value = item.City;
                        province.value = item.Province;
                        country.value = item.Country;
                        postalCode.value = item.Postal_Code;
                        password.value = item.Password;

                    } else {
                        alert("Data Not Found");
                    }
    
    
                }) 
        </script>

<script src="http://localhost/IWTProject/IWT_LifeInsurance_SLIITY1S2/Frontend/Assets/JS/policyHolder.js"></script>

    </div>

            
                


                
                
            
       
   


    
   
</body>
</html>